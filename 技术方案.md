# 技术方案

## 一、 开发环境与基础构建

| 工具/库 | 版本建议 |
| :--- | :--- |
| JDK | 21.0.8 |
| Maven | 3.8.7 |
| Lombok | 1.18.42 |

## 二、 后端核心

不使用 Spring，我们需要手动组装轻量级组件

| 工具/库 | 名称 | 用途与说明 |
| :--- | :--- | :--- |
| Web 服务器 | Apache Tomcat 10 | 11太新了 |
| 数据库 | MariaDB | 兼容 MySQL |
| 数据库驱动 | mariadb-java-client | JDBC Driver |
| ORM 工具 | Apache Commons DbUtils | 主要用 `QueryRunner` 类 |
| 连接池 | HikariCP | 保证稳定性 |
| 工具包 | Apache Commons Lang3 | 用于字符串判空、随机数生成等 |

## 三、 前端技术

| 工具/库 | 名称 | 说明 |
| :--- | :--- | :--- |
| 核心技术 | JSP + JSTL | JSP 写页面，JSTL 循环显示数据，多用标签库 |
| UI 框架 | Bootstrap 5 | 代替 CSS |
| 图标库 | Bootstrap Icons | 增加小图标 |
| 交互脚本 | 原生 JavaScript | 既然是简单交互，不需要 React/Vue，简单的表单验证用原生 JS 即可 |

## 四、 特定功能组件

| 功能 | 工具/库 | 说明 |
| :--- | :--- | :--- |
| Excel 处理 | EasyExcel | 比 Apache POI 简单 |
| PDF 生成 | OpenPDF | 简单易用 |

## 五、 部署与运维

| 工具 | 说明 |
| :--- | :--- |
| 服务器 OS | Ubuntu 24.04 Server |
| 终端工具 | Termius |

## 六、项目树
```text
PegasusHospital/
├── pom.xml                     # Maven 配置文件 (依赖管理)
├── README.md                   # 说明文档 (作业要求必交)
├── src/
│   ├── main/
│   │   ├── java/               # Java 源代码
│   │   │   └── com/
│   │   │       └── pegasus/
│   │   │           ├── entity/         # [模型层] 对应数据库表的实体类 (用 Lombok)
│   │   │           │   ├── Patient.java
│   │   │           │   ├── Doctor.java
│   │   │           │   ├── Appointment.java
│   │   │           │   └── Admin.java
│   │   │           │
│   │   │           ├── dao/            # [数据层] 数据库操作 (DbUtils 写在这里)
│   │   │           │   ├── BasicDao.java     # 封装通用的 CRUD 方法
│   │   │           │   ├── PatientDao.java
│   │   │           │   ├── DoctorDao.java
│   │   │           │   └── AppointmentDao.java
│   │   │           │
│   │   │           ├── service/        # [业务层] 处理逻辑 (如：判断号源是否已满)
│   │   │           │   ├── PatientService.java
│   │   │           │   ├── DoctorService.java
│   │   │           │   └── ReportService.java # 专门处理导出 Excel/PDF
│   │   │           │
│   │   │           ├── web/            # [控制层] Servlet (接收请求，调用 Service)
│   │   │           │   ├── AuthServlet.java    # 登录、注册、注销
│   │   │           │   ├── PatientServlet.java # 患者的操作接口
│   │   │           │   └── AdminServlet.java   # 管理员/医生管理接口
│   │   │           │
│   │   │           ├── filter/         # [过滤器] 拦截器
│   │   │           │   ├── EncodingFilter.java # 解决中文乱码 (必写)
│   │   │           │   └── LoginFilter.java    # 拦截未登录用户的访问
│   │   │           │
│   │   │           └── utils/          # [工具类] 核心工具箱
│   │   │               ├── DBUtil.java         # 数据库连接池 (HikariCP)
│   │   │               ├── ExcelUtil.java      # EasyExcel 封装
│   │   │               └── PdfUtil.java        # OpenPDF 封装
│   │   │
│   │   ├── resources/          # 资源文件
│   │   │   ├── db.properties   # 数据库账号密码配置
│   │   │   └── database.sql    # 数据库建表脚本 (作业要求必交)
│   │   │
│   │   └── webapp/             # Web 根目录 (JSP 和静态资源)
│   │       ├── assets/         # 静态资源
│   │       │   ├── css/        # 放 Bootstrap 的 CSS
│   │       │   ├── js/         # 放 Bootstrap 的 JS
│   │       │   └── img/        # 医院 logo 等图片
│   │       │
│   │       ├── files/          # 临时文件夹 (用于存放上传的 Excel 或生成的 PDF)
│   │       │   └── template.xlsx # 医生导入模板 (供管理员下载)
│   │       │
│   │       ├── WEB-INF/        # 安全目录 (外部无法直接访问)
│   │       │   └── web.xml     # Web 配置 (Tomcat 11 可选，但建议保留)
│   │       │
│   │       ├── index.jsp       # 首页 (登录页)
│   │       ├── register.jsp    # 注册页
│   │       │
│   │       ├── patient/        # 患者专用页面目录
│   │       │   ├── home.jsp        # 患者中心/科室查询
│   │       │   ├── doctors.jsp     # 医生列表/预约操作
│   │       │   └── my_appointments.jsp # 我的挂号记录
│   │       │
│   │       └── admin/          # 管理员专用页面目录
│   │           ├── dashboard.jsp   # 管理后台首页
│   │           ├── doctor_mgr.jsp  # 医生排班管理 (含导入按钮)
│   │           └── stats.jsp       # 统计报表页 (含导出按钮)
│   │
│   └── test/                   # 测试代码 (可选)
│       └── java/
│           └── ...Test.java
│
└── target/                     # 编译输出目录 (Maven 自动生成)
```